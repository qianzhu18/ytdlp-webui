<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#fafaf9" />
    <title>{{ app_title }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <main class="shell">
      <header class="header">
        <div class="brand">
          <img
            src="https://imagehost.qianzhu.online/api/rfile/千逐（卡通版）.jpg"
            class="profile-logo"
            alt="Qianzhu"
          />
          <h1>Downloader by Qianzhu</h1>
          <span class="subtitle">追求极致简约的本地视频下载工具</span>
        </div>
        <nav>
          <a href="https://blog.qianzhu.me/" target="_blank" class="nav-link">
            📖 个人博客
          </a>
        </nav>
      </header>

      <section class="card">
        <div class="card-header">
          <h2>新建任务</h2>
          <p>支持 YouTube, Bilibili 等主流平台，支持批量粘贴。</p>
        </div>

        <form id="download-form">
          <div class="field">
            <label for="url">视频链接 (一行一个)</label>
            <textarea
              id="url"
              name="url"
              rows="3"
              placeholder="在此粘贴链接..."
              required
            ></textarea>
          </div>

          <div
            class="field"
            style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"
          >
            <div>
              <label for="preset">下载格式</label>
              <select id="preset" name="preset"></select>
            </div>
            <div style="display: flex; align-items: center; padding-top: 24px;">
              <input type="checkbox" id="use-cookies" style="width: auto; margin-right: 8px;" />
              <label for="use-cookies" style="margin: 0; cursor: pointer;">
                启用 Cookies (会员/限速)
              </label>
            </div>
          </div>

          <button type="submit" id="start-btn" class="btn-primary">开始下载</button>
        </form>
      </section>

      <section class="card">
        <div
          class="card-header"
          style="display: flex; justify-content: space-between; align-items: center;"
        >
          <h2>任务队列</h2>
          <span id="queue-count" style="font-size: 0.8rem; color: var(--text-sub);">
            0 active
          </span>
        </div>
        <ul id="task-list" class="task-list">
          <li style="padding: 20px; text-align: center; color: var(--text-light); font-size: 0.9rem;">
            暂无下载任务，去添加一个吧 🍃
          </li>
        </ul>
      </section>

      <footer class="site-footer">
        <p>
          Made with 🤍 by
          <a href="https://blog.qianzhu.me/" target="_blank">千逐 (Qianzhu)</a>
        </p>
        <p class="hint">关注博客获取更多 Docker 工具与技术分享</p>
      </footer>
    </main>

    <script>
      window.APP_CONFIG = {{ config_json | safe }};
    </script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
